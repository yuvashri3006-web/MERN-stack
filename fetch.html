<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Celebrity JSON Manager</title>
  <style>
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background-color: #f4f4f4; }
    button { margin: 2px; }
    input { width: 100px; }
  </style>
</head>
<body>

<h1>Celebrity JSON Manager</h1>

<table id="celebrityTable">
  <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Profession</th>
      <th>Followers (M)</th>
      <th>Verified</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <!-- Data rows go here -->
  </tbody>
</table>

<h2>Add New Celebrity</h2>
Name: <input type="text" id="newName">
Profession: <input type="text" id="newProfession">
Followers: <input type="number" id="newFollowers">
Verified: <input type="checkbox" id="newVerified">
<button onclick="addCelebrity()">Add</button>

<script>
let celebrities = [];

// Fetch JSON from file
fetch('data1.json')
  .then(response => response.json())
  .then(data => {
    // If your JSON structure is { "celebrities": [...] }
    celebrities = data.celebrities;
    renderTable();
  })
  .catch(error => console.error('Error loading JSON:', error));

function renderTable() {
  const tbody = document.querySelector("#celebrityTable tbody");
  tbody.innerHTML = "";
  celebrities.forEach((c, index) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${c.id}</td>
      <td contenteditable="true" onblur="editCelebrity(${index}, 'name', this.textContent)">${c.name || ''}</td>
      <td contenteditable="true" onblur="editCelebrity(${index}, 'profession', this.textContent)">${c.profession || ''}</td>
      <td contenteditable="true" onblur="editCelebrity(${index}, 'followersInMillions', parseFloat(this.textContent) || 0)">${c.followersInMillions || 0}</td>
      <td><input type="checkbox" ${c.verified ? "checked" : ""} onchange="editCelebrity(${index}, 'verified', this.checked)"></td>
      <td><button onclick="deleteCelebrity(${index})">Delete</button></td>
    `;
    tbody.appendChild(tr);
  });
}

function editCelebrity(index, key, value) {
  celebrities[index][key] = value;
  console.log("Updated:", celebrities[index]);
}

function deleteCelebrity(index) {
  if (confirm(`Delete ${celebrities[index].name}?`)) {
    celebrities.splice(index, 1);
    renderTable();
  }
}

function addCelebrity() {
  const name = document.getElementById("newName").value;
  const profession = document.getElementById("newProfession").value;
  const followers = parseFloat(document.getElementById("newFollowers").value);
  const verified = document.getElementById("newVerified").checked;

  if(!name || !profession || isNaN(followers)) {
    alert("Please fill all fields correctly.");
    return;
  }

  const newId = celebrities.length ? (Math.max(...celebrities.map(c => typeof c.id === "number" ? c.id : 0)) + 1) : 1;

  celebrities.push({ id: newId, name, profession, followersInMillions: followers, verified });
  renderTable();
}
</script>

</body>
</html>

